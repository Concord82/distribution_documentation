# Чистая установка Application Manager (AM) на клиентский сервер:

Подключаемся к серверу через ssh протокол.

Переходим в аккаунт root с помощью команды `sudo su`

будет добавлен скриншот

Затем скачиваем дистрибутив AM через терминал с помощью команды:

`wget ссылкуНеобходимоЗапроситьУТехническогоОтделаOptimacros/download -O ИМЯ_ФАЙЛА.С_РАСШИРЕНИЕМ`

будет добавлен скриншот

Далее нам необходимо установить на сервере docker. Устанавливаем его, следуя инструкции из его официального сайта:

https://docs.docker.com/engine/install/ubuntu/

Версия docker не имеет принципиального значения (в отличие от версии vagrant необходимой для Воркспейса), устанавливаем
самую актуальную на момент установки.

Далее мы создаём директорию на сервере под AM по пути: `/om/application-manager`

Для этого переходим в папку om с помощью команды: `cd /om/` и создаём там директорию application-manager с помощью команды
`mkdir application-manager`

будет добавлен скриншот

Теперь когда мы подготовили папку для установки AM и скачали дистрибутив, нам необходимо будет установить его
в созданную папку. Для этого переходим в директорию со скачанным ранее дистрибутивом с помощью команды `cd /home/имяПользователя/`.
Выдаём файлу права с помощью команды `chmod +x application-manager-версия.sh` и запускаем инсталлятор с помощью команды
`./application-manager-версия.sh` во время установки инсталлятор попросит подтвердить установку AM в дефолтную
директорию по пути, которому мы как раз и подготовили директории. Текущая версия инсталлятора устанавливает AM с
дефолтными настройками подключения, которые нам предстоит настроить вручную, далее нынешняя версия инсталлятора, выдаёт
ошибку со следующим содержимым:

будет добавлен скриншот

Которая нам говорит о том, что по заданным путям отсутствуют файлы сертификатов. Затем мы переходим в директорию, где
лежит AM `cd /om/application-manager`

будет добавлен скриншот

Затем мы смотрим содержимое файла .env с помощью команды `cat .env` и видим что там есть только одно свойство VERSION.

Видим, что AM прервал установку на самом начальном этапе, до установки базы данных. Теперь мы можем смело
редактировать .env файл, в соответствии с нашими требованиями(открываем редактирование с помощью команды `nano .env`). В частности установить пароли к аккаунту админа, пароли к базе
данных и информацию о web части.

будет добавлен скриншот

```
Пример описания env файла будет добавлен в скором времени

```

Более подробное описание полей можно посмотреть тут:
<a href="https://github.com/optimacros/distribution_documentation/blob/main/envDescription.md" target="_blank">ссылка на описание полей .env</a>

Для пароля базы данных (DB_PASSWORD) воспользуемся любым генератором паролей в интернете (http://www.onlinepasswordgenerator.ru/), сгенерировав надёжный пароль длиной более
20 символов (ОЧЕНЬ важно: пароль не должен содержать символов `@:;/\%` это приведёт к багу установки).

После настройки всех пунктов, сохраняем наши изменения в
.env файл.

Затем вовращаемся к нашей проблеме во время установки AM. Переходим в папку с сертификатами с помощью команды
`cd /om/application-manager/data/nginx/cert` После чего, находясь в папке для сертификатов, мы генерируем сами сертификаты
с помощью команды

`openssl req -newkey rsa:2048 -nodes -keyout crt.key -x509 -days 1095 -out bundle.crt`

Отвечаем на вопросы, которые задаст программа генерации. На этом с генерацией сертификатов мы заканчиваем.

Затем мы переходим снова в папку с инсталлятором AM с помощью команды: `cd /home/user/` и запускаем инсталлятор
`./application-manager-версия.sh`

Во время установки на вопрос, нужно ли перезаписывать env файл конечно же отвечаем нет. Ожидаем процесс установки.

будет добавлен скриншот

Затем увидим вот такую консоль, это значит что AM успешно установлен.

будет добавлен скриншот

Можно проверять результат установки в браузере введя имя хоста нашего AM.

[Вернуться к содержанию <](contents.md)

[Вернуться к оглавлению <<](index.md)
